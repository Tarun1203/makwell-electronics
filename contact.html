<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact • MakWell Support</title>
  <meta name="description" content="Contact MakWell: product registration, support, repair request, WhatsApp, email and phone." />
  <link rel="icon" href="https://raw.githubusercontent.com/Tarun1203/makwell-electronics/main/images/Makwell-logo.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <script defer src="theme.js"></script>

  <style>
    body { font-family: 'Inter', sans-serif; }
    .top-hero { padding: 28px 0; border-bottom: 1px solid var(--border); text-align:center; }
    .anchor-nav { position: sticky; top: var(--header-h,64px); z-index: 5; background: color-mix(in oklab,var(--bg) 92%, transparent); backdrop-filter: saturate(140%) blur(8px); border-bottom: 1px solid var(--border); }
    .anchor-nav .wrap { display: flex; gap: 8px; flex-wrap: wrap; justify-content:center; padding: 10px 16px; }
    .chip { border:1px solid var(--border); background:var(--panel); border-radius:999px; padding:8px 14px; font-weight:700; cursor:pointer; }
    .chip:hover { box-shadow:var(--ring); }
    .help-grid { display:grid; gap:16px; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); margin:20px 0; }
    .card.help { padding:18px; border-radius:22px; display:flex; flex-direction:column; justify-content:space-between; min-height:180px; transition:.2s all ease; }
    .card.help:hover { transform:translateY(-3px); box-shadow:var(--shadow); }
    .icon { width:44px; height:44px; border-radius:12px; display:grid; place-items:center; border:1px solid var(--border); background:color-mix(in oklab,var(--accent) 12%, var(--bg)); font-size:20px; }
    .two { display:grid; gap:14px; grid-template-columns:1.2fr .8fr; }
    @media (max-width:900px){ .two{grid-template-columns:1fr} }
    form { display:grid; gap:12px; margin-top:12px; }
    input, select, textarea { width:100%; padding:10px 12px; border-radius:8px; border:1px solid var(--border); background:var(--panel); font:inherit; }
    button, .btn { background:var(--accent); color:#fff; border:none; padding:10px 18px; border-radius:8px; cursor:pointer; font-weight:600; }
    button:hover, .btn:hover { box-shadow:var(--ring); }
    .note { font-size:12px; color:var(--muted); }
    footer { text-align:center; padding:40px 0; margin-top:30px; border-top:1px solid var(--border); }
  </style>
</head>

<body>
<header class="site">
  <nav class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
    <a class="brand" href="index.html" style="display:flex;align-items:center;gap:10px;text-decoration:none">
      <img src="https://raw.githubusercontent.com/Tarun1203/makwell-electronics/main/images/Makwell-logo.png" alt="MakWell" width="32" height="32" style="border-radius:6px;object-fit:contain">
      <b>MakWell</b> <small class="muted">— Make it Happen</small>
    </a>
    <div class="navlinks" style="display:flex;gap:10px;align-items:center">
      <a href="index.html">Home</a>
      <a href="products.html">Products</a>
      <a href="about.html">About</a>
      <a href="contact.html" class="active">Contact</a>
      <button id="themeToggle" class="theme-toggle" onclick="toggleTheme()"></button>
    </div>
  </nav>
</header>

<section class="top-hero">
  <div class="container">
    <h1>Need Help?</h1>
    <p class="muted">We’re here to provide all the help you need.</p>
  </div>
</section>

<section class="container" id="registration">
  <div class="two">
    <article class="card" style="padding:16px">
      <h2>Service / Support Form</h2>
      <p class="muted">Fill out the form below for product registration, support, or repair.</p>

      <form id="supportForm">
        <select id="type" required>
          <option value="">Select Request Type</option>
          <option>Product Registration</option>
          <option>Product Support</option>
          <option>Repair Request</option>
        </select>

        <input type="text" id="customer" placeholder="Customer Name" required>
        <input type="tel" id="phone" placeholder="Phone Number" required pattern="[0-9]{10}">
        <input type="email" id="email" placeholder="Email (optional)">
        <input type="text" id="category" placeholder="Product Category (TV / WM / Stabilizer)">
        <input type="text" id="model" placeholder="Model Name / Number">
        <select id="warranty">
          <option value="Yes">Under Warranty</option>
          <option value="No">Out of Warranty</option>
        </select>
        <textarea id="issue" placeholder="Issue / Description"></textarea>
        <input type="text" id="city" placeholder="City">
        <input type="text" id="state" placeholder="State">

        <button type="submit">Submit Request</button>
        <p class="note">You’ll receive a Call ID confirmation via WhatsApp and Email.</p>
      </form>
    </article>

    <aside class="card" style="padding:16px">
      <h3>Need faster support?</h3>
      <p class="muted">WhatsApp: <a href="https://api.whatsapp.com/send?phone=919980000515" target="_blank">9980000515</a><br>
      Email: <a href="mailto:makwellindia456@gmail.com">makwellindia456@gmail.com</a><br>
      Call: <a href="tel:+919980000515">9980000515</a></p>
    </aside>
  </div>
</section>

<footer>© <span id="year"></span> MakWell — Make it Happen.</footer>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  // Generate Call ID like YY/MK-ProductRegistration/MM-Count
  function generateCallId(type) {
    const now = new Date();
    const yy = String(now.getFullYear()).slice(-2);
    const mm = String(now.getMonth() + 1).padStart(2, "0");
    const short = type.split(" ")[0] || "REQ";
    const count = Math.floor(Math.random() * 999) + 1;
    return `${yy}/MK-${short}/${mm}-${count}`;
  }

  function prefixFor(type){
    if(type.includes("Registration")) return "Product Registration";
    if(type.includes("Support")) return "Product Support";
    if(type.includes("Repair")) return "Repair Request";
    return "Service";
  }

  function waUrl(to, obj){
    const phone = String(to || "").replace(/\D/g, "");
    const txt = [
      `Call ID: ${obj.callId}`,
      `Type: ${obj.type}`,
      `Name: ${obj.customer}`,
      `Phone: +91 ${obj.phone}`,
      `Category: ${obj.category}`,
      `Model: ${obj.model}`,
      `Issue: ${obj.issue}`,
      `City/State: ${obj.city} / ${obj.state}`
    ].join("\n");
    return `https://api.whatsapp.com/send?phone=${phone}&text=${encodeURIComponent(txt)}`;
  }

  function mailtoUrl(obj){
    const subject = `New ${prefixFor(obj.type)} Ticket ${obj.callId}`;
    const body = [
      `Call ID: ${obj.callId}`,
      `Type: ${obj.type}`,
      `Name: ${obj.customer}`,
      `Phone: +91 ${obj.phone}`,
      `Email: ${obj.email || "-"}`,
      `Category: ${obj.category || "-"}`,
      `Model: ${obj.model || "-"}`,
      `Under Warranty: ${obj.warranty}`,
      `Issue: ${obj.issue}`,
      `City/State: ${obj.city || "-"} / ${obj.state || "-"}`
    ].join("\n");
    return `mailto:makwellindia456@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
  }

  document.getElementById("supportForm").addEventListener("submit", async e => {
    e.preventDefault();

    const type = document.getElementById("type").value.trim();
    const obj = {
      type,
      customer: document.getElementById("customer").value.trim(),
      phone: document.getElementById("phone").value.trim(),
      email: document.getElementById("email").value.trim(),
      category: document.getElementById("category").value.trim(),
      model: document.getElementById("model").value.trim(),
      warranty: document.getElementById("warranty").value,
      issue: document.getElementById("issue").value.trim(),
      city: document.getElementById("city").value.trim(),
      state: document.getElementById("state").value.trim()
    };

    // Warranty redirect
    if (obj.type === "Product Support" && obj.warranty === "No") {
      obj.type = "Repair Request";
    }

    obj.callId = generateCallId(obj.type);

    // Google Sheets endpoint (replace with Apps Script URL)
    const endpoint = "YOUR_GOOGLE_SCRIPT_WEBAPP_URL";
    try {
      await fetch(endpoint, { method:"POST", body: JSON.stringify(obj), headers:{ "Content-Type":"application/json" } });
    } catch (err) {
      console.warn("Google Sheets save failed", err);
    }

    // WhatsApp link (based on type)
    const waTo = (obj.type.includes("Order")) ? "919980000515" : "919482844677";
    const waLink = waUrl(waTo, obj);
    window.open(waLink, "_blank");

    // Send email fallback
    window.location.href = mailtoUrl(obj);
  });
</script>
</body>
</html>
