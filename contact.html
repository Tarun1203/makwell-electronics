<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Contact • MakWell Support</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; background:#f8f9fa; color:#1a1a1a; line-height:1.6; }
    .container { max-width:1200px; margin:0 auto; padding:16px; }
    header { background:white; border-bottom:1px solid #dee2e6; padding:16px 0; margin-bottom:32px; box-shadow:0 2px 4px rgba(0,0,0,0.05); }
    .header-content { display:flex; align-items:center; gap:12px; max-width:1200px; margin:0 auto; padding:0 16px; }
    .logo { width:40px; height:40px; border-radius:6px; }
    h1 { font-size:28px; text-align:center; margin-bottom:8px; }
    .subtitle { text-align:center; color:#6c757d; margin-bottom:32px; }
    .grid { display:grid; grid-template-columns:1.3fr 0.7fr; gap:24px; }
    @media (max-width:1000px) { .grid { grid-template-columns:1fr; } }
    .card { background:white; border:1px solid #dee2e6; border-radius:12px; padding:24px; box-shadow:0 2px 8px rgba(0,0,0,0.08); }
    .card h3 { margin:0 0 16px; font-size:20px; }
    .section-title { font-size:15px; font-weight:700; color:#4285f4; margin:20px 0 12px; padding-bottom:8px; border-bottom:2px solid #4285f4; }
    label { display:block; font-weight:600; margin:12px 0 6px; font-size:14px; }
    input, select, textarea { width:100%; padding:10px 12px; border:1px solid #dee2e6; border-radius:8px; font:inherit; }
    input:focus, select:focus, textarea:focus { outline:none; border-color:#4285f4; box-shadow:0 0 0 3px rgba(66,133,244,0.1); }
    textarea { min-height:100px; resize:vertical; }
    .grid-2 { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .grid-3 { display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; }
    @media (max-width:768px) { .grid-2, .grid-3 { grid-template-columns:1fr; } }
    .btn { background:#4285f4; color:white; border:none; padding:12px 24px; border-radius:8px; font-weight:600; cursor:pointer; }
    .btn:hover { background:#3367d6; }
    .btn:disabled { opacity:0.5; cursor:not-allowed; }
    .btn.secondary { background:white; color:#1a1a1a; border:1px solid #dee2e6; }
    .required { color:#dc3545; }
    .result { margin-top:16px; padding:16px; border-radius:8px; background:#e7f3ff; border:1px solid #4285f4; }
    .success { color:#28a745; font-weight:600; font-size:16px; }
    .error { color:#dc3545; font-weight:600; }
    .contact-item { margin-bottom:12px; padding:12px; background:#f8f9fa; border-radius:8px; }
    .contact-item strong { display:block; margin-bottom:4px; }
    .contact-item a { color:#4285f4; text-decoration:none; }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <img class="logo" src="https://raw.githubusercontent.com/Tarun1203/makwell-electronics/main/images/Makwell-logo.png" alt="MakWell">
      <div>
        <strong style="font-size:18px">MakWell Support</strong>
        <div style="font-size:13px;color:#6c757d">Make it Happen</div>
      </div>
    </div>
  </header>

  <div class="container">
    <h1>Customer Support Portal</h1>
    <p class="subtitle">Product registration, service requests, and repair support</p>

    <div class="grid">
      <form id="form" class="card">
        <h3>Create Support Ticket</h3>

        <label>Request Type <span class="required">*</span></label>
        <select id="type" required>
          <option value="">Select type</option>
          <option value="Product Registration">Product Registration</option>
          <option value="Product Support">Product Support</option>
          <option value="Repair Request">Repair Request</option>
        </select>

        <div class="section-title">Customer Information</div>
        <div class="grid-2">
          <div>
            <label>Name <span class="required">*</span></label>
            <input id="customer" required>
          </div>
          <div>
            <label>Phone <span class="required">*</span></label>
            <input id="phone" type="tel" pattern="[0-9]{10}" required>
          </div>
        </div>
        <label>Email</label>
        <input id="email" type="email">

        <div class="section-title">Ticket Details</div>
        <div class="grid-3">
          <div>
            <label>Issue Type <span class="required">*</span></label>
            <select id="issueType" required>
              <option value="">Select</option>
              <option>Installation</option>
              <option>Usage Help</option>
              <option>Connectivity</option>
              <option>No Power</option>
              <option>Physical Damage</option>
              <option>Noise/Vibration</option>
              <option>Display Issue</option>
              <option>Motor</option>
              <option>Others</option>
            </select>
          </div>
          <div>
            <label>Priority</label>
            <select id="priority">
              <option>Normal</option>
              <option>Low</option>
              <option>High</option>
              <option>Urgent</option>
            </select>
          </div>
          <div>
            <label>Installation Required?</label>
            <select id="installRequired">
              <option>No</option>
              <option>Yes</option>
            </select>
          </div>
        </div>

        <div class="section-title">Product Information</div>
        <label>Category <span class="required">*</span></label>
        <select id="category" required>
          <option value="">Select category</option>
          <option>Televisions</option>
          <option>Washing Machines</option>
          <option>Stabilizers</option>
          <option>Refrigerators</option>
          <option>Air Conditioners</option>
        </select>

        <div id="tvFields" style="display:none">
          <div class="grid-2">
            <div>
              <label>TV Model</label>
              <select id="tvModel">
                <option value="">Select</option>
                <option>Makwell - 24 Normal</option>
                <option>Makwell - 32 Smart</option>
                <option>Makwell - 43 Smart</option>
                <option>Makwell - 50 Google</option>
              </select>
            </div>
            <div>
              <label>Warranty (Years)</label>
              <input id="warrantyTV" type="number" value="1" readonly>
            </div>
          </div>
        </div>

        <div id="wmFields" style="display:none">
          <div class="grid-2">
            <div>
              <label>Washing Machine Model</label>
              <select id="wmModel">
                <option value="">Select</option>
                <option>SAWM7KG</option>
                <option>SAWM9KG</option>
                <option>SAWM11KGSCD</option>
              </select>
            </div>
            <div>
              <label>Warranty</label>
              <input id="warrantyWM" value="1+2+5" readonly>
            </div>
          </div>
        </div>

        <div id="stabFields" style="display:none">
          <div class="grid-2">
            <div>
              <label>Stabilizer Model</label>
              <select id="stabModel">
                <option value="">Select</option>
                <option>Makwell Mini</option>
                <option>Makwell Ref</option>
                <option>Makwell Smart</option>
              </select>
            </div>
            <div>
              <label>Warranty (Years)</label>
              <input id="warrantyStab" value="5" readonly>
            </div>
          </div>
        </div>

        <div class="grid-3">
          <div>
            <label>Serial Number</label>
            <input id="serial">
          </div>
          <div>
            <label>Purchase Date</label>
            <input id="purchaseDate" type="date">
          </div>
          <div>
            <label>Service Type <span class="required">*</span></label>
            <select id="serviceType" required>
              <option value="">Select</option>
              <option>Under Warranty</option>
              <option>Out Of Warranty</option>
              <option>Technician Confirm</option>
              <option>Charged</option>
            </select>
          </div>
        </div>

        <div class="section-title">Dealer Information</div>
        <div class="grid-3">
          <div>
            <label>Dealer Name</label>
            <input id="dealerName">
          </div>
          <div>
            <label>Dealer Place</label>
            <input id="dealerPlace">
          </div>
          <div>
            <label>Invoice Number</label>
            <input id="invoice">
          </div>
        </div>

        <div class="section-title">Issue Details</div>
        <label>Issue Description</label>
        <textarea id="issue"></textarea>

        <div class="grid-2">
          <div>
            <label>City</label>
            <input id="city">
          </div>
          <div>
            <label>State</label>
            <input id="state">
          </div>
        </div>

        <div id="msg" style="margin-top:16px;min-height:20px;font-weight:600"></div>

        <div style="margin-top:20px;display:flex;gap:12px">
          <button type="submit" class="btn">Create Ticket</button>
          <button type="reset" class="btn secondary">Clear</button>
        </div>

        <div id="result" class="result" style="display:none"></div>
      </form>

      <aside class="card">
        <h3>Quick Contacts</h3>
        <div class="contact-item">
          <strong>📦 Orders</strong>
          <a href="https://api.whatsapp.com/send?phone=919980000515">+91 99800 00515</a>
        </div>
        <div class="contact-item">
          <strong>🔧 Service</strong>
          <a href="https://api.whatsapp.com/send?phone=919482844677">+91 94828 44677</a>
        </div>
        <div class="contact-item">
          <strong>✉️ Email</strong>
          <a href="mailto:makwellindia456@gmail.com">makwellindia456@gmail.com</a>
        </div>
      </aside>
    </div>
  </div>

  <script>
    const API = 'https://script.google.com/macros/s/AKfycbzfIbaBTZ4rEJW5nHCeVwME0WiykN66FQZmwVUEpTt9Q1ss9tuLREv-LTjM-vBSHAFi/exec';
    const SECRET = 'MakWell2024SecureKey';

    document.getElementById('purchaseDate').max = new Date().toISOString().split('T')[0];

    document.getElementById('category').addEventListener('change', function() {
      document.getElementById('tvFields').style.display = this.value === 'Televisions' ? 'block' : 'none';
      document.getElementById('wmFields').style.display = this.value === 'Washing Machines' ? 'block' : 'none';
      document.getElementById('stabFields').style.display = this.value === 'Stabilizers' ? 'block' : 'none';
    });

    document.getElementById('form').addEventListener('submit', async function(e) {
      e.preventDefault();
      const btn = e.target.querySelector('button[type="submit"]');
      const msg = document.getElementById('msg');
      const result = document.getElementById('result');
      
      try {
        msg.innerHTML = '<span style="color:#ff6b00">⏳ Creating...</span>';
        btn.disabled = true;
        result.style.display = 'none';

        const data = {
          secret: SECRET,
          type: document.getElementById('type').value,
          customer: document.getElementById('customer').value,
          phone: document.getElementById('phone').value,
          email: document.getElementById('email').value,
          category: document.getElementById('category').value,
          issueType: document.getElementById('issueType').value,
          priority: document.getElementById('priority').value,
          channel: 'Web Form',
          installRequired: document.getElementById('installRequired').value,
          tvModel: document.getElementById('tvModel').value,
          warrantyTV: document.getElementById('warrantyTV').value,
          wmModel: document.getElementById('wmModel').value,
          warrantyWM: document.getElementById('warrantyWM').value,
          stabModel: document.getElementById('stabModel').value,
          warrantyStab: document.getElementById('warrantyStab').value,
          serviceType: document.getElementById('serviceType').value,
          serial: document.getElementById('serial').value,
          purchaseDate: document.getElementById('purchaseDate').value,
          issue: document.getElementById('issue').value,
          city: document.getElementById('city').value,
          state: document.getElementById('state').value,
          dealerName: document.getElementById('dealerName').value,
          dealerPlace: document.getElementById('dealerPlace').value,
          invoice: document.getElementById('invoice').value
        };

        const r = await fetch(API, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(data)
        });

        const res = await r.json();
        
        if(res.ok) {
          msg.textContent = '';
          result.innerHTML = `
            <div class="success">✅ Ticket Created!</div>
            <div style="margin-top:8px">
              <strong>ID:</strong> ${res.callId}<br>
              <strong>Type:</strong> ${data.type}
            </div>
          `;
          result.style.display = 'block';
          e.target.reset();
        } else {
          throw new Error(res.error);
        }
      } catch(err) {
        msg.textContent = '';
        result.innerHTML = `<div class="error">❌ ${err.message}</div>`;
        result.style.display = 'block';
      } finally {
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>
