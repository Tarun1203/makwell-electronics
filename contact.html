<!-- Ticket: Product Registration / Support / Repair -->
<section class="container section" id="new-ticket">
  <article class="card" style="padding:16px">
    <h2 style="margin:0 0 10px">Create a support ticket</h2>
    <p class="muted" style="margin:0 0 14px">
      Product Support is available only if <b>Under Warranty = Yes</b>. Otherwise your request will be logged as <b>Repair Request</b>.
    </p>

    <form id="supportForm" class="grid" style="--min:260px; grid-template-columns:repeat(auto-fit,minmax(var(--min),1fr)); gap:12px">
      <!-- Request Type -->
      <div class="card" style="padding:12px">
        <label style="font-weight:800; display:block; margin-bottom:6px">Request type</label>
        <label style="display:flex;align-items:center;gap:8px;margin:4px 0">
          <input type="radio" name="type" value="Product Registration" checked> Product Registration
        </label>
        <label style="display:flex;align-items:center;gap:8px;margin:4px 0">
          <input type="radio" name="type" value="Product Support"> Product Support
        </label>
        <label style="display:flex;align-items:center;gap:8px;margin:4px 0">
          <input type="radio" name="type" value="Repair Request"> Repair Request
        </label>
      </div>

      <!-- Customer -->
      <div>
        <label>Customer name</label>
        <input class="input" name="customer" placeholder="Full name" required>
      </div>
      <div>
        <label>Phone</label>
        <input class="input" name="phone" placeholder="10-digit mobile" pattern="^[0-9]{10}$" required>
      </div>
      <div>
        <label>Email (optional)</label>
        <input class="input" name="email" type="email" placeholder="name@example.com">
      </div>
      <div>
        <label>City</label>
        <input class="input" name="city" placeholder="City" required>
      </div>
      <div>
        <label>State</label>
        <input class="input" name="state" placeholder="State" required>
      </div>

      <!-- Product -->
      <div>
        <label>Product category</label>
        <select class="input" name="category" required>
          <option value="" disabled selected>Select a category</option>
          <option>Televisions</option>
          <option>Washing Machines</option>
          <option>Stabilizers</option>
        </select>
      </div>
      <div>
        <label>Model</label>
        <input class="input" name="model" placeholder="e.g., 43&quot; webOS" required>
      </div>
      <div>
        <label>Serial number (optional)</label>
        <input class="input" name="serial" placeholder="Serial no.">
      </div>
      <div>
        <label>Purchase date (optional)</label>
        <input class="input" name="purchaseDate" type="date">
      </div>

      <!-- Warranty + Issue -->
      <div>
        <label>Under Warranty</label>
        <select class="input" name="warranty" id="warranty" required>
          <option value="" disabled selected>Select</option>
          <option>Yes</option>
          <option>No</option>
        </select>
      </div>
      <div>
        <label>Issue type</label>
        <select class="input" name="issueType">
          <option value="" selected>—</option>
          <option>Installation</option>
          <option>Usage Help</option>
          <option>Connectivity</option>
          <option>No Power</option>
          <option>Physical Damage</option>
          <option>Noise/Vibration</option>
          <option>Other</option>
        </select>
      </div>
      <div style="grid-column:1/-1">
        <label>Issue description</label>
        <textarea class="input" name="issue" rows="3" placeholder="Tell us briefly about the issue…"></textarea>
      </div>

      <!-- Hidden/Computed -->
      <input type="hidden" name="computedType" id="computedType">
      <input type="hidden" name="callId" id="callId">

      <!-- Actions -->
      <div style="grid-column:1/-1; display:flex; gap:10px; flex-wrap:wrap; align-items:center">
        <button class="btn" type="submit">Create ticket</button>
        <button class="btn secondary" type="reset">Clear</button>
        <span id="formNote" class="muted"></span>
      </div>
    </form>

    <!-- Result / Next steps -->
    <div id="ticketResult" class="card" style="margin-top:12px; padding:12px; display:none">
      <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap">
        <strong id="ticketHeadline">Ticket created</strong>
        <span class="muted" id="ticketDetails"></span>
        <a id="waBtn" class="btn" target="_blank" rel="noopener">Open WhatsApp</a>
        <a id="mailBtn" class="btn secondary">Email</a>
      </div>
    </div>
  </article>
</section>

<!-- Wire the form controller -->
<script defer src="contact-form.js"></script>
